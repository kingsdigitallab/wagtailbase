{% if post %}
{% load pageurl rich_text %}

<article class="post" id="post{{ post.id }}">
    <header>
        {% block posttitle %}
        <h1 class="posttitle">{{ post.title }}</h1>
        {% endblock %}

        {% block postauthor %}
        <p class="byline">by <a href="{% pageurl post.blog_index %}?author={{ post.owner.username }}">{{ post.owner }}</a>
            <time datetime="{{ post.date|date:'c' }}">{{ post.date }}</time>
        </p>
        {% endblock %}
    </header>

    {% block postcontent %}
    <section class="postcontent">
        {{ post.content|richtext }}
    </section>
    {% endblock %}

    {% block posttags %}
    <footer>
        {% with post.tags.all as tags %}
        {% if tags %}
        <h3>Tags</h3>
        <ul class="tags">
            {% for tag in tags %}
            <li class="tag">
                <a href="{% pageurl post.blog_index %}?tag={{ tag }}">{{ tag }}</a>
            </li>
            {% endfor %}
        </ul>
        {% endif %}
        {% endwith %}
    </footer>
    {% endblock %}
</article>
{% endif %}